{% extends "_partials/dashboard_teacher/layaout.html" %}
{% load static %}

{% block content %}
    <!-- Assistance Section -->
    <h4 class="text-color-pink">GRADEBOOK</h4>
    <div class="gradebook-container">
        <div class="content">
            <div class="content-header">
                <div class="button-group" id="button-group">
                    <a href="{% url 'create_gradebook' %}">
                        <button class="button button-add-new-item">
                            <i class="bi bi-clipboard-data white"></i> <span>Add New Item</span>
                        </button>
                    </a>
                    <a href="{% url 'gradebook_calculation' %}">
                        <button class="button button-calculations">
                            <i class="bi bi-gear white"></i> <span>Calculations</span>
                        </button>
                    </a>
                    <a href="">
                        <button class="button button-layout">
                            <i class="bi bi-layout-text-sidebar white"></i>
                            <span>Layout</span>
                        </button>
                    </a>
                </div>
                <p>Filter by Class here</p>
                <select class="dropdown">
                    {% for class in classes %}
                        <option value="{{ class.id }}">{{ class.name }}</option>
                    {% endfor %}
                </select>
                <a href="">
                    <button class="button button-fa-sliders">
                        <i class="bi bi-sliders noir"></i>
                    </button>
                </a>
            </div>

            <div class="table-container">
                <table class="gradebook-table">
                    <thead>
                        <tr class="header-row">
                            <th>CLASS</th>
                            <th>STUDENT</th>
                            <th>AVERAGE</th>
                            <th>EXAM</th>
                            <th>TESTS</th>
                            <th>HOMEWORKS</th>
                        </tr>
                    </thead>
                    <tbody>
    {% for entry in class_data %}
        <tr class="{% cycle 'colored-row' 'white-row' %}">
            <td>{{ entry.class_instance__name }}</td>
            <td>{{ entry.total_students }} Students</td>
            <td>
                {{ entry.class_avg|default_if_none:"0.0"|floatformat:1 }}%
                {% if entry.class_avg >= 90 %}
                    (A)
                {% elif entry.class_avg >= 80 %}
                    (B)
                {% elif entry.class_avg >= 70 %}
                    (C)
                {% elif entry.class_avg >= 55 %}
                    (D)
                {% else %}
                    (F)
                {% endif %}
            </td>
            <td><span class="view-link">View ({{ entry.exam_count }})</span></td>
            <td><span class="view-link">View ({{ entry.test_count }})</span></td>
            <td><span class="view-link">View ({{ entry.homework_count }})</span></td>
        </tr>
    {% empty %}
        <tr>
            <td colspan="6">No gradebook entries found.</td>
        </tr>
    {% endfor %}
</tbody>
                </table>
            </div>
        </div>
    </div>
{% endblock %}